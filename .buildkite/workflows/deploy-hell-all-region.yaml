steps:
- command: dagger call plan -args  --src . --tfmod infrastructure/environments/hell/aws/us-west-2
  env:
    ENVIRONMENT: hell
    REGION: us-west-2
  label: Terraform Plan for Region us-west-2 in hell environment
  plugins:
  - github.com/seek-oss/aws-sm-buildkite-plugin#v2.3.2:
      env:
        LOGS_PROVIDER_PASSWORD: LOGS_PROVIDER_PASSWORD_HELL_US_WEST_2
        METRICS_PROVIDER_PASSWORD: METRICS_PROVIDER_PASSWORD_HELL_US_WEST_2
- block: Release
  prompt: Please unblock the pipeline
- command: dagger call apply -args  --src . --tfmod infrastructure/environments/hell/aws/us-west-2
  env:
    ENVIRONMENT: hell
    REGION: us-west-2
  label: Terraform Apply for Region us-west-2 in hell environment
  plugins:
  - github.com/seek-oss/aws-sm-buildkite-plugin#v2.3.2:
      env:
        LOGS_PROVIDER_PASSWORD: LOGS_PROVIDER_PASSWORD_HELL_US_WEST_2
        METRICS_PROVIDER_PASSWORD: METRICS_PROVIDER_PASSWORD_HELL_US_WEST_2
